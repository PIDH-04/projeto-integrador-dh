<!DOCTYPE html>
<html lang="pt-BR">
  <%- include("partials/adminHead", {css: ["baseAdmin.css", "pedidosAdmin.css"],
  titulo: "Pedidos Admin | E-móvel"}) %>
  <body class="admin-container">
    <%- include("partials/adminHeader") %>
    <%- include("partials/topoPg") %>
    <main class="">
      <h1>Pedidos</h1>
      <form class="pedidos-form-container">
        <label for="data-inicial">
          Data inicial
          <input
            class="data-seletor"
            type="date"
            name="data-inicial"
            id="data-inicial"
          />
        </label>
        <label for="data-final">
          Data final
          <input
            class="data-seletor"
            type="date"
            name="data-final"
            id="data-final"
          />
        </label>
        <button type="submit">
          <img src="/img/pesquisar.png" alt="Pesquisar" />
          Pesquisar
        </button>
      </form>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Data</th>
            <th>Cliente</th>
            <th>E-mail cliente</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <% locals.pedidos.forEach(pedido => { %>
              <td><%= pedido.id %></td>
              <td>
                <% const data = new Date(pedido.createdAt) %>
                <% const dia = data.getDate() %>
                <% const mes = data.getMonth() %>
                <% const ano = data.getFullYear() %>
                <% const diaFormatado = dia < 10 ? `0${dia}` : dia  %>
                <% const mesFormatado = mes < 10 ? `0${mes}` : mes  %>
                <%= `${diaFormatado}/${mesFormatado}/${ano}`  %>
                </td>
              <td><%= pedido.clientes.nome %></td>
              <td><%= pedido.clientes.email %></td>
              <td><%= pedido.status %></td>
            <% }) %>
            <td class="mudar-status-container">
              <form action="" class="mudar-status">
                <select>
                  <option disabled selected>Alterar Status</option>
                  <% locals.statusPedidos.forEach(status => { %>
                    <option value="<%=status.status %>"><%=status.status %></option>
                  <% }); %>
                </select>
                <button>Salvar</button>
              </form>
            </td>
          </tr>
        </tbody>
      </table>
    </main>
  </body>
</html>
